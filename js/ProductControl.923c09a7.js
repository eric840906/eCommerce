(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ProductControl"],{"18cd":function(e,t,c){"use strict";c.r(t);c("b0c0");var r=c("7a23"),a=Object(r["withScopeId"])("data-v-002a6d30");Object(r["pushScopeId"])("data-v-002a6d30");var n={class:"d-flex flex-column"},o={class:"d-flex p-3 m-2 dashboard-morph user-row text-start"},u={class:"table"},i=Object(r["createTextVNode"])("Add new product"),d=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",{width:"50px"},"#"),Object(r["createVNode"])("th",{scope:"col"},"Name"),Object(r["createVNode"])("th",{scope:"col"},"Price"),Object(r["createVNode"])("th",{scope:"col"},"Sale price"),Object(r["createVNode"])("th",{scope:"col"},"Category"),Object(r["createVNode"])("th",{scope:"col"},"Quantity"),Object(r["createVNode"])("th",{scope:"col"},"Control")],-1),s={class:"align-middle"},l={width:"50px"},p={scope:"col"},b={scope:"col"},O={scope:"col"},j={scope:"col"},m=Object(r["createVNode"])("option",{selected:"",value:"other"},"other",-1),f=Object(r["createVNode"])("option",{value:"cake"},"cake",-1),v=Object(r["createVNode"])("option",{value:"cookie"},"cookie",-1),h={scope:"col"},g={scope:"col"},w=Object(r["createTextVNode"])("UPDATE"),V=Object(r["createTextVNode"])("DELETE"),N={class:"col-4 p-1"},x={class:"col-4 p-1"},y={class:"col-4 p-1"},k={class:"col-4 p-1"},P={class:"col-4 p-1"},S={class:"ms-auto p-1"},I=Object(r["createTextVNode"])("Upload images"),D={class:"col-4 p-1"},C=Object(r["createTextVNode"])("Confirm & Update");Object(r["popScopeId"])();var T=a((function(e,t,c,T,U,_){var B=Object(r["resolveComponent"])("Button");return Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("div",o,[Object(r["createVNode"])("table",u,[Object(r["createVNode"])("thead",null,[Object(r["createVNode"])(B,{onClick:e.addProduct},{default:a((function(){return[i]})),_:1},8,["onClick"]),d]),Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.productList,(function(c,n){return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:c._id},[Object(r["createVNode"])("tr",s,[Object(r["createVNode"])("td",l,Object(r["toDisplayString"])(n+1),1),Object(r["createVNode"])("td",p,[Object(r["withDirectives"])(Object(r["createVNode"])("p",{class:"m-0"},Object(r["toDisplayString"])(c.name),513),[[r["vShow"],e.updateIndex!==n]]),Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",style:{width:"100%"},"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentProduct.data.name=t})},null,512),[[r["vShow"],e.updateIndex===n],[r["vModelText"],e.currentProduct.data.name]])]),Object(r["createVNode"])("td",b,[Object(r["withDirectives"])(Object(r["createVNode"])("p",{class:"m-0"},Object(r["toDisplayString"])(c.price),513),[[r["vShow"],e.updateIndex!==n]]),Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"number",style:{width:"100%"},"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.currentProduct.data.price=t})},null,512),[[r["vShow"],e.updateIndex===n],[r["vModelText"],e.currentProduct.data.price,void 0,{number:!0}]])]),Object(r["createVNode"])("td",O,[Object(r["withDirectives"])(Object(r["createVNode"])("p",{class:"m-0"},Object(r["toDisplayString"])(c.discountPrice),513),[[r["vShow"],e.updateIndex!==n]]),Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"number",style:{width:"100%"},"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.currentProduct.data.discountPrice=t})},null,512),[[r["vShow"],e.updateIndex===n],[r["vModelText"],e.currentProduct.data.discountPrice,void 0,{number:!0}]])]),Object(r["createVNode"])("td",j,[Object(r["withDirectives"])(Object(r["createVNode"])("p",{class:"m-0"},Object(r["toDisplayString"])(c.category),513),[[r["vShow"],e.updateIndex!==n]]),Object(r["withDirectives"])(Object(r["createVNode"])("select",{class:"form-select","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.currentProduct.data.category=t})},[m,f,v],512),[[r["vShow"],e.updateIndex===n],[r["vModelSelect"],e.currentProduct.data.category]])]),Object(r["createVNode"])("td",h,[Object(r["withDirectives"])(Object(r["createVNode"])("p",{class:"m-0"},Object(r["toDisplayString"])(c.quantity),513),[[r["vShow"],e.updateIndex!==n]]),Object(r["withDirectives"])(Object(r["createVNode"])("input",{type:"text",style:{width:"100%"},"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.currentProduct.data.quantity=t})},null,512),[[r["vShow"],e.updateIndex===n],[r["vModelText"],e.currentProduct.data.quantity]])]),Object(r["createVNode"])("td",g,[Object(r["createVNode"])(B,{class:"w-100 mb-2",onClick:function(t){return e.toggleUpdate(c,n)}},{default:a((function(){return[w]})),_:2},1032,["onClick"]),Object(r["createVNode"])(B,{class:"w-100",onClick:function(t){return e.removeProduct(c._id)}},{default:a((function(){return[V]})),_:2},1032,["onClick"])])]),Object(r["withDirectives"])(Object(r["createVNode"])("div",null,[Object(r["createVNode"])("form",{class:"form-group d-flex flex-wrap img-group",onSubmit:t[12]||(t[12]=Object(r["withModifiers"])((function(){return e.uploadOthers&&e.uploadOthers.apply(e,arguments)}),["prevent"]))},[Object(r["createVNode"])("div",N,[Object(r["createVNode"])("input",{class:"custom-file-input w-100",type:"file",name:"image0",id:"image0",onChange:t[6]||(t[6]=function(t){return e.putImage(t,0)})},null,32)]),Object(r["createVNode"])("div",x,[Object(r["createVNode"])("input",{class:"custom-file-input w-100",type:"file",name:"image1",id:"image1",onChange:t[7]||(t[7]=function(t){return e.putImage(t,1)})},null,32)]),Object(r["createVNode"])("div",y,[Object(r["createVNode"])("input",{class:"custom-file-input w-100",type:"file",name:"image2",id:"image2",onChange:t[8]||(t[8]=function(t){return e.putImage(t,2)})},null,32)]),Object(r["createVNode"])("div",k,[Object(r["createVNode"])("input",{class:"custom-file-input w-100",type:"file",name:"image3",id:"image3",onChange:t[9]||(t[9]=function(t){return e.putImage(t,3)})},null,32)]),Object(r["createVNode"])("div",P,[Object(r["createVNode"])("input",{class:"custom-file-input w-100",type:"file",name:"image4",id:"image4",onChange:t[10]||(t[10]=function(t){return e.putImage(t,4)})},null,32)]),Object(r["createVNode"])("div",S,[Object(r["createVNode"])(B,{class:"ms-auto",type:"submit"},{default:a((function(){return[I]})),_:1})]),Object(r["createVNode"])("div",D,[Object(r["createVNode"])(B,{onClick:t[11]||(t[11]=Object(r["withModifiers"])((function(t){return e.updateProduct()}),["prevent"]))},{default:a((function(){return[C]})),_:1})])],32)],512),[[r["vShow"],e.updateIndex===n]])],64)})),128))])])])])})),U=c("1da1"),_=(c("96cf"),c("4de4"),c("d3b7"),c("3ca3"),c("ddb0"),c("d81d"),c("1276"),c("ac1f"),c("9911"),c("99af"),c("a15b"),c("6f93")),B=c("79f6"),R=c("6c42"),M=c("0b26"),q=Object(r["defineComponent"])({components:{Button:_["a"]},setup:function(){var e=function(){M["a"].emit("Product-open")},t=Object(R["b"])(),c=Object(r["ref"])(null),a=Object(r["ref"])(1),n=Object(r["ref"])([]),o=Object(r["ref"])([]),u=Object(r["reactive"])({data:{name:"",price:0,discountPrice:0,category:"",quantity:0,description:"",images:[]}}),i=function(e,t){e.target.files&&(n.value.length=5,n.value[t]=e.target.files[0])},d=function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.info("Start uploading, it might take some time"),n.value=n.value.filter((function(e){return void 0!==e})),e.next=5,Promise.all(n.value.map((function(e){var t=new FormData;return t.append("image",e),Object(B["k"])(t)})));case 5:c=e.sent,200===c[c.length-1].status&&(t.success("".concat(c.length," images uploaded successfully")),n.value.length=0),u.data.images=c.map((function(e){var t=e.data.data.link.split(".");return t[2]=t[2].concat("m"),t=t.join("."),t})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.error("OPPS! something wrong during the process");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),s=function(e,t){c.value=t,u.data=e},l=function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(B["c"])("default",a.value);case 2:t=e.sent,o.value=t.data.data;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!(u.data.discountPrice>u.data.price)){e.next=3;break}return e.abrupt("return",t.warning("discount cannot be greater than the original price"));case 3:if(0!==u.data.discountPrice&&0!==u.data.price){e.next=5;break}return e.abrupt("return",t.warning("invalid price or discount"));case 5:return e.next=7,Object(B["m"])(u.data,u.data._id);case 7:r=e.sent,200===r.status&&(t.success("Product updated"),c.value=null,l()),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.error(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(U["a"])(regeneratorRuntime.mark((function e(c){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(B["b"])(c);case 3:if(r=e.sent,204!==r.status){e.next=8;break}return e.next=7,l();case 7:t.success("Product deleted");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.error(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return M["a"].on("upload-success",(function(){return l()})),l(),{productList:o,addProduct:e,updateIndex:c,toggleUpdate:s,currentProduct:u,putImage:i,uploadOthers:d,updateProduct:p,removeProduct:b}}});c("2175");q.render=T,q.__scopeId="data-v-002a6d30";t["default"]=q},2175:function(e,t,c){"use strict";c("c9a4")},c9a4:function(e,t,c){}}]);
//# sourceMappingURL=ProductControl.923c09a7.js.map